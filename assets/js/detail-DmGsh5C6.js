import{_ as N,y as F,c as D,b as l,d as i,w as s,g as r,p as R,q as T,e as u,t as n,j as C,A as M,F as V,s as j,z,o as d,m as S,a as I,h as $,E as q,u as L}from"./index-DeZBs9YJ.js";import{t as O,f as G,m as H,a as J}from"./tmdb-BbYNbO-2.js";const K={class:"media-detail-container"},Q={class:"back-button-container"},U={class:"media-info"},W={class:"poster"},X={class:"info"},Y={class:"title"},Z={class:"description"},ee={__name:"MediaDetail",props:{media:{type:Object,required:!0}},emits:["back"],setup(e,{emit:P}){const y=e,b=F(()=>{const m=y.media.rating;return m>=8?"#67C23A":m>=6?"#E6A23C":"#F56C6C"}),x=P,t=()=>{x("back")};return console.log(y.media),(m,v)=>{const f=u("el-button"),g=u("el-image"),p=u("el-tag"),o=u("el-descriptions-item"),k=u("el-descriptions"),w=u("el-card");return d(),D("div",K,[l("div",Q,[i(f,{onClick:t,icon:R(T)},{default:s(()=>v[0]||(v[0]=[r("返回列表")])),_:1},8,["icon"])]),i(w,{class:"detail-card"},{default:s(()=>[l("div",U,[l("div",W,[i(g,{src:e.media.posterPath?"https://image.tmdb.org/t/p/w600_and_h900_bestv2"+e.media.posterPath:"",fit:"cover","error-src":"https://via.placeholder.com/300x400?text=No+Image","preview-src-list":e.media.posterPath?["https://image.tmdb.org/t/p/w600_and_h900_bestv2"+e.media.posterPath]:[]},null,8,["src","preview-src-list"])]),l("div",X,[l("h1",Y,n(e.media.title),1),i(k,{column:1},{default:s(()=>[i(o,{label:"类型"},{default:s(()=>[(d(!0),D(V,null,j(e.media.genres,h=>(d(),C(p,{key:h.id,class:"genre-tag",size:"small"},{default:s(()=>[r(n(h.name),1)]),_:2},1024))),128))]),_:1}),i(o,{label:"原标题"},{default:s(()=>[r(n(e.media.originalTitle),1)]),_:1}),i(o,{label:"上映日期"},{default:s(()=>[r(n(e.media.releaseDate),1)]),_:1}),i(o,{label:"状态"},{default:s(()=>[r(n(e.media.status),1)]),_:1}),e.media.type==="tv"?(d(),C(o,{key:0,label:"季数"},{default:s(()=>[r(n(e.media.seasonsCount)+"季",1)]),_:1})):M("",!0),e.media.type==="tv"?(d(),C(o,{key:1,label:"集数"},{default:s(()=>[r(n(e.media.episodeCount)+"集",1)]),_:1})):M("",!0),e.media.type==="movie"?(d(),C(o,{key:2,label:"时长"},{default:s(()=>[r(n(e.media.runtime)+"分钟",1)]),_:1})):M("",!0),i(o,{label:"评分"},{default:s(()=>[l("span",{style:z({color:b.value})},n(e.media.rating.toFixed(1)),5)]),_:1})]),_:1})])]),l("div",Z,[v[1]||(v[1]=l("h2",null,"剧情简介",-1)),l("p",null,n(e.media.overview||"暂无简介"),1)])]),_:1})])}}},te=N(ee,[["__scopeId","data-v-3f31e5e9"]]),ae={key:0},se={key:1,class:"no-data"},oe={__name:"detail",setup(e){const P=S(),y=L(),b=P.params.id,x=()=>{y.back()},t=I(null),m=I(!1),v=async()=>{var f,g,p,o,k,w,h,A;m.value=!0;try{try{const _=await O.getDetails(b),a=G(_.data);t.value={...a,type:"tv",poster:a.posterPath,actors:((f=_.data.created_by)==null?void 0:f.map(c=>c.name))||[],director:((p=(g=_.data.created_by)==null?void 0:g[0])==null?void 0:p.name)||"未知",description:a.overview,episodes:a.episodeCount,seasons:a.seasonCount};return}catch{const a=await H.getDetails(b),c=J(a.data),E={Rumored:"传闻",Planned:"计划中","In Production":"制作中","Post Production":"后期制作",Released:"已上映",Canceled:"已取消"};t.value={...c,type:"movie",poster:c.posterPath,actors:((k=(o=a.data.credits)==null?void 0:o.cast)==null?void 0:k.slice(0,5).map(B=>B.name))||[],status:E[a.data.status]||a.data.status,director:((A=(h=(w=a.data.credits)==null?void 0:w.crew)==null?void 0:h.find(B=>B.job==="Director"))==null?void 0:A.name)||"未知",description:c.overview,runtime:c.runtime,genres:a.data.genres||[],status:c.status||"未知"}}}catch(_){console.error("获取影视详情失败:",_),q.error("获取影视详情失败")}finally{m.value=!1}};return $(()=>{v()}),(f,g)=>{const p=u("el-empty");return t.value?(d(),D("div",ae,[i(te,{media:{id:t.value.id,title:t.value.title,originalTitle:t.value.title,type:t.value.type,posterPath:t.value.poster,releaseDate:t.value.releaseDate,rating:t.value.rating,status:t.value.status,seasonsCount:t.value.seasons,episodeCount:t.value.episodes,runtime:t.value.runtime,overview:t.value.description,genres:t.value.genres},onBack:x},null,8,["media"])])):(d(),D("div",se,[i(p,{description:"未找到影视信息"})]))}}},le=N(oe,[["__scopeId","data-v-51277bf0"]]);export{le as default};
